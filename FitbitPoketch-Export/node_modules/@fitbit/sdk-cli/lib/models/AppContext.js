"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const app_package_1 = require("@fitbit/app-package");
const jszip_1 = tslib_1.__importDefault(require("jszip"));
const ts_events_1 = require("ts-events");
const promiseFs_1 = require("../util/promiseFs");
class AppContext {
    constructor() {
        this.onAppPackageLoad = new ts_events_1.VoidSyncEvent();
    }
    async loadAppPackage(packagePath) {
        const appPackage = await promiseFs_1.readFile(packagePath).then(jszip_1.default.loadAsync).then(app_package_1.fromJSZip);
        this.appPackage = appPackage;
        this.appPackagePath = packagePath;
        this.onAppPackageLoad.post();
        return appPackage;
    }
}
exports.default = AppContext;
//# sourceMappingURL=AppContext.js.map